<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HRD Dashboard Demo</title>
  <style>
    :root { --bg:#0d1520;--surface:#111a2b;--muted:#94a3b8;--text:#e2e8f0;--primary:#3b82f6;--card:#0f172a;--card-border:rgba(255,255,255,0.08);}
    body{margin:0;font-family:system-ui,Pretendard,sans-serif;background:radial-gradient(1200px 800px at 10% 10%,#0a1220,var(--bg));color:var(--text);}
    .topbar{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:rgba(13,21,32,0.7);position:sticky;top:0;z-index:10;}
    .container{max-width:1000px;margin:0 auto;padding:20px;}
    .search-input{display:flex;gap:6px;}
    .search-input input{flex:1;padding:10px;border-radius:10px;border:1px solid var(--card-border);background:var(--surface);color:var(--text);}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px;margin-top:12px;}
    .card{display:grid;grid-template-columns:56px 1fr;gap:12px;padding:16px;background:var(--card);border:1px solid var(--card-border);border-radius:16px;}
    .emoji{width:56px;height:56px;display:grid;place-items:center;font-size:28px;background:var(--surface);border-radius:12px;}
    .card__title{margin:0;font-size:16px;}
    .card__desc{margin:4px 0;color:var(--muted);}
    mark{background:rgba(59,130,246,0.25);}
    .modal[hidden]{display:none;}.modal{position:fixed;inset:0;z-index:50;}
    .modal__backdrop{position:absolute;inset:0;background:rgba(0,0,0,0.5);}
    .modal__panel{position:absolute;inset:50% auto auto 50%;transform:translate(-50%,-50%);width:min(720px,92vw);background:var(--card);border:1px solid var(--card-border);border-radius:16px;}
    .modal__header,.modal__footer{padding:12px 16px;border-bottom:1px solid var(--card-border);display:flex;justify-content:space-between;align-items:center;}
    .modal__footer{border-top:1px solid var(--card-border);border-bottom:none;justify-content:flex-end;}
    .modal__body{padding:16px;min-height:200px;}
    .spinner{width:28px;height:28px;border-radius:50%;border:3px solid rgba(255,255,255,0.25);border-top-color:var(--primary);animation:spin 1s linear infinite;margin:30px auto;}
    @keyframes spin{to{transform:rotate(360deg)}}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);}
  </style>
</head>
<body>
  <header class="topbar"><h1>HRD Dashboard</h1><div>hr@ahnlab.com</div></header>
  <main class="container">
    <form id="searchForm">
      <label class="sr-only" for="q">검색어</label>
      <div class="search-input"><input id="q" type="search" placeholder="예) 2023 / 0 / AI" /><button type="submit">검색</button></div>
    </form>
    <div id="resultStatus" aria-live="polite" style="margin:8px 0;color:#94a3b8"></div>
    <div id="cards" class="grid"></div>
  </main>
  <div id="modal" class="modal" role="dialog" aria-modal="true" hidden>
    <div class="modal__backdrop" data-close></div>
    <div class="modal__panel">
      <header class="modal__header"><h3 id="modalTitle">상세보기</h3><button id="closeModalBtn">✕</button></header>
      <div class="modal__body"><div id="modalSpinner" class="spinner"></div><div id="modalContent" hidden></div></div>
      <footer class="modal__footer"><button data-close>닫기</button></footer>
    </div>
  </div>
  <template id="cardTmpl">
    <article class="card"><div class="emoji">📦</div><div><h3 class="card__title"></h3><p class="card__desc"></p><button class="viewBtn">상세보기</button></div></article>
  </template>
  <script>
    const DATA=[{"id":"ai","emoji":"🤖","title":"AI 활용 교육","description":"사내 AI 툴 활용 역량 향상","years":[2021,2022,2023],"budgets":{"2021":0,"2022":500000,"2023":0}},{"id":"dev","emoji":"👨‍💻","title":"개발자 컨퍼런스","description":"연례 개발자 대상 컨퍼런스","years":[2021,2022,2023],"budgets":{"2021":15000000,"2022":18000000,"2023":25000000}},{"id":"qa","emoji":"💻","title":"테스트 (qa)","description":"숫자/문자 혼합 검색용 샘플","years":[2021,2023],"budgets":{"2021":0,"2023":30000}}];
    let CURRENT_QUERY="",MODAL_OPENING=false;
    function render(items){const wrap=document.getElementById('cards');wrap.innerHTML="";const tmpl=document.getElementById('cardTmpl');const tokens=CURRENT_QUERY?parseQuery(CURRENT_QUERY).tokens:[];items.forEach(it=>{const n=tmpl.content.firstElementChild.cloneNode(true);n.querySelector('.emoji').textContent=it.emoji;n.querySelector('.card__title').innerHTML=highlight(it.title,tokens);n.querySelector('.card__desc').innerHTML=highlight(it.description,tokens);n.querySelector('.viewBtn').onclick=(e)=>openDetail(e,it);wrap.appendChild(n);});if(items.length===0)wrap.innerHTML="<p>검색 결과 없음</p>";}
    function parseQuery(q){q=q.trim();if(!q)return{mode:'all',tokens:[]};const tokens=[];let m,rx=/"([^"]+)"|(\S+)/g;while((m=rx.exec(q))!==null){tokens.push((m[1]||m[2]).toLowerCase());}return{mode:q.includes("OR")?"any":"all",tokens};}
    function matchItem(it,parsed){const blob=(it.title+" "+it.description+" "+JSON.stringify(it.years)+" "+JSON.stringify(it.budgets)).toLowerCase();if(parsed.tokens.length===0)return true;const test=t=>blob.includes(t);return parsed.mode==="all"?parsed.tokens.every(test):parsed.tokens.some(test);}
    function highlight(txt,tokens){if(!tokens.length)return txt;const rx=new RegExp("("+tokens.map(t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|")+")","gi");return txt.replace(rx,"<mark>$1</mark>");}
    document.getElementById('searchForm').onsubmit=e=>{e.preventDefault();CURRENT_QUERY=document.getElementById('q').value;const parsed=parseQuery(CURRENT_QUERY);const filtered=DATA.filter(it=>matchItem(it,parsed));render(filtered);document.getElementById('resultStatus').textContent=filtered.length+"건 검색됨";};
    render(DATA);
    function openDetail(ev,it){if(MODAL_OPENING)return;MODAL_OPENING=true;const modal=document.getElementById('modal');modal.hidden=false;document.getElementById('modalSpinner').hidden=false;document.getElementById('modalContent').hidden=true;document.getElementById('modalTitle').textContent=it.title;setTimeout(()=>{document.getElementById('modalContent').innerHTML="<p>"+it.description+"</p><pre>"+JSON.stringify(it.budgets,null,2)+"</pre>";document.getElementById('modalSpinner').hidden=true;document.getElementById('modalContent').hidden=false;MODAL_OPENING=false;},400);}
    document.querySelectorAll('[data-close],#closeModalBtn').forEach(el=>el.onclick=()=>{document.getElementById('modal').hidden=true;});
  </script>
</body>
</html>